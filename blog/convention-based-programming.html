<!DOCTYPE html><!--IJdQFSP3HviNokOy6LWwh--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="/images/logo-small.png"/><link rel="preload" as="image" href="https://images.ctfassets.net/wjg1udsw901v/27s4Gn7WXRTKhSaaWBU2RN/c057b731733a4d8943365bdeaeb71147/alain-pham-P_qvsF7Yodw-unsplash.jpg"/><link rel="stylesheet" href="/_next/static/chunks/19d110f125a6a880.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/chunks/4c98436a675d5713.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/ba947f6798c3c403.js"/><script src="/_next/static/chunks/9a513a8c4dabec14.js" async=""></script><script src="/_next/static/chunks/713fc8ad9ceac69a.js" async=""></script><script src="/_next/static/chunks/19e94e7551cef099.js" async=""></script><script src="/_next/static/chunks/turbopack-2ca5897f65736e1e.js" async=""></script><script src="/_next/static/chunks/8be72f203fe36d6f.js" async=""></script><script src="/_next/static/chunks/ff1a16fafef87110.js" async=""></script><script src="/_next/static/chunks/708205fa81a1891d.js" async=""></script><script src="/_next/static/chunks/34e59d4fa8652639.js" async=""></script><link rel="preload" href="/_next/static/chunks/578ca6ed020117e9.css" as="style"/><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=G-Y039CLFJME" as="script"/><title>Fix poor project structure with Convention Based Programming | Tech Blog | FAESEL.COM</title><meta name="description" content="Having looked at a number of projects in my lifetime, I always come across classes named something like &quot;CustomerService&quot; with similar variations (usually in th"/><link rel="author" href="https://www.faesel.com/about"/><meta name="author" content="Faesel Saeed"/><meta name="keywords" content="convention,unit-test,project-structure"/><meta property="og:title" content="Fix poor project structure with Convention Based Programming"/><meta property="og:description" content="Having looked at a number of projects in my lifetime, I always come across classes named something like &quot;CustomerService&quot; with similar variations (usually in th"/><meta property="og:image" content="https://images.ctfassets.net/wjg1udsw901v/27s4Gn7WXRTKhSaaWBU2RN/c057b731733a4d8943365bdeaeb71147/alain-pham-P_qvsF7Yodw-unsplash.jpg"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2017-08-20T00:00+01:00"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@faeselsaeed"/><meta name="twitter:creator" content="@faeselsaeed"/><meta name="twitter:title" content="Fix poor project structure with Convention Based Programming"/><meta name="twitter:description" content="Having looked at a number of projects in my lifetime, I always come across classes named something like &quot;CustomerService&quot; with similar variations (usually in th"/><meta name="twitter:image" content="https://images.ctfassets.net/wjg1udsw901v/27s4Gn7WXRTKhSaaWBU2RN/c057b731733a4d8943365bdeaeb71147/alain-pham-P_qvsF7Yodw-unsplash.jpg"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/favicon.ico"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","name":"Faesel Saeed","url":"https://www.faesel.com","logo":{"@type":"ImageObject","url":"https://www.faesel.com/images/logo.png"},"sameAs":["https://github.com/faesel","https://www.linkedin.com/in/faesel-saeed-a97b1614"]}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"WebSite","name":"FAESEL.COM","url":"https://www.faesel.com","description":"A modern tech blog exploring technology, coding, and digital innovation","publisher":{"@type":"Organization","name":"Faesel Saeed","url":"https://www.faesel.com"}}</script><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body><div hidden=""><!--$--><!--/$--></div><a href="#main-content" class="skip-to-content">Skip to content</a><header class="Header-module__hBw1pG__header"><div class="Header-module__hBw1pG__container"><a class="Header-module__hBw1pG__logo" aria-label="Home" href="/"><img alt="Logo" width="40" height="40" decoding="async" data-nimg="1" class="Header-module__hBw1pG__logoImage" style="color:transparent" src="/images/logo-small.png"/></a><button class="Header-module__hBw1pG__mobileMenuButton" aria-label="Toggle menu" aria-expanded="false">‚ò∞</button><nav class="Header-module__hBw1pG__nav " role="navigation" aria-label="Main navigation"><a class="Header-module__hBw1pG__navLink " href="/">Home</a><a class="Header-module__hBw1pG__navLink " href="/blog">Blog</a><a class="Header-module__hBw1pG__navLink " href="/projects">Projects</a><a class="Header-module__hBw1pG__navLink " href="/about">About</a><a class="Header-module__hBw1pG__navLink " href="/contact">Contact</a></nav></div></header><main id="main-content" style="min-height:70vh"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Fix poor project structure with Convention Based Programming","description":"Having looked at a number of projects in my lifetime, I always come across classes named something like \"CustomerService\" with similar variations (usually in th","image":"https://images.ctfassets.net/wjg1udsw901v/27s4Gn7WXRTKhSaaWBU2RN/c057b731733a4d8943365bdeaeb71147/alain-pham-P_qvsF7Yodw-unsplash.jpg","datePublished":"2017-08-20T00:00+01:00","dateModified":"2017-08-20T00:00+01:00","author":{"@type":"Person","name":"Faesel Saeed","url":"https://www.faesel.com/about"},"publisher":{"@type":"Organization","name":"Faesel Saeed","url":"https://www.faesel.com","logo":{"@type":"ImageObject","url":"https://www.faesel.com/images/logo.png"}},"keywords":"convention, unit-test, project-structure","url":"https://www.faesel.com/blog/convention-based-programming","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.faesel.com/blog/convention-based-programming"}}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://www.faesel.com"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://www.faesel.com/blog"},{"@type":"ListItem","position":3,"name":"Fix poor project structure with Convention Based Programming","item":"https://www.faesel.com/blog/convention-based-programming"}]}</script><article class="page-module__dgei_G__article"><a class="page-module__dgei_G__backLink" href="/blog">‚Üê Back to Blog</a><header class="page-module__dgei_G__header"><h1 class="page-module__dgei_G__title">Fix poor project structure with Convention Based Programming</h1><div class="page-module__dgei_G__meta"><time class="page-module__dgei_G__date" dateTime="2017-08-20T00:00+01:00">üìÖ <!-- -->August 19, 2017</time><span class="page-module__dgei_G__separator">‚Ä¢</span><span class="page-module__dgei_G__readingTime">‚è±Ô∏è <!-- -->5 min read</span></div><div class="page-module__dgei_G__tags"><span class="page-module__dgei_G__tag">convention</span><span class="page-module__dgei_G__tag">unit-test</span><span class="page-module__dgei_G__tag">project-structure</span></div></header><div class="page-module__dgei_G__heroImage"><img alt="Fix poor project structure with Convention Based Programming" decoding="async" data-nimg="fill" class="page-module__dgei_G__heroImageImg" style="position:absolute;height:100%;width:100%;left:0;top:0;right:0;bottom:0;color:transparent" src="https://images.ctfassets.net/wjg1udsw901v/27s4Gn7WXRTKhSaaWBU2RN/c057b731733a4d8943365bdeaeb71147/alain-pham-P_qvsF7Yodw-unsplash.jpg"/></div><div class="ShareButtons-module__iQZDeW__floating"><div class="ShareButtons-module__iQZDeW__buttons"><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fwww.faesel.com%2Fblog%2Fconvention-based-programming&amp;text=Fix%20poor%20project%20structure%20with%20Convention%20Based%20Programming" target="_blank" rel="noopener noreferrer" class="ShareButtons-module__iQZDeW__button ShareButtons-module__iQZDeW__twitter" aria-label="Share on Twitter"><svg viewBox="0 0 24 24" class="ShareButtons-module__iQZDeW__icon"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.faesel.com%2Fblog%2Fconvention-based-programming" target="_blank" rel="noopener noreferrer" class="ShareButtons-module__iQZDeW__button ShareButtons-module__iQZDeW__linkedin" aria-label="Share on LinkedIn"><svg viewBox="0 0 24 24" class="ShareButtons-module__iQZDeW__icon"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.faesel.com%2Fblog%2Fconvention-based-programming" target="_blank" rel="noopener noreferrer" class="ShareButtons-module__iQZDeW__button ShareButtons-module__iQZDeW__facebook" aria-label="Share on Facebook"><svg viewBox="0 0 24 24" class="ShareButtons-module__iQZDeW__icon"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></a><a href="https://reddit.com/submit?url=https%3A%2F%2Fwww.faesel.com%2Fblog%2Fconvention-based-programming&amp;title=Fix%20poor%20project%20structure%20with%20Convention%20Based%20Programming" target="_blank" rel="noopener noreferrer" class="ShareButtons-module__iQZDeW__button ShareButtons-module__iQZDeW__reddit" aria-label="Share on Reddit"><svg viewBox="0 0 24 24" class="ShareButtons-module__iQZDeW__icon"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"></path></svg></a><a href="mailto:?subject=Fix%20poor%20project%20structure%20with%20Convention%20Based%20Programming&amp;body=Having%20looked%20at%20a%20number%20of%20projects%20in%20my%20lifetime%2C%20I%20always%20come%20across%20classes%20named%20something%20like%20%22CustomerService%22%20with%20similar%20variations%20(usually%20in%20th%0A%0Ahttps%3A%2F%2Fwww.faesel.com%2Fblog%2Fconvention-based-programming" class="ShareButtons-module__iQZDeW__button ShareButtons-module__iQZDeW__email" aria-label="Share via Email"><svg viewBox="0 0 24 24" class="ShareButtons-module__iQZDeW__icon"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></svg></a><button class="ShareButtons-module__iQZDeW__button ShareButtons-module__iQZDeW__copy " aria-label="Copy link"><svg viewBox="0 0 24 24" class="ShareButtons-module__iQZDeW__icon"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button></div></div><div class="page-module__dgei_G__content"><p>Having looked at a number of projects in my lifetime, I always come across classes named something like &quot;CustomerService&quot; with similar variations (usually in the same project calling each other) ranging from &quot;CustomerProvider / Helper /Manager / Store / etc...&quot;.</p>
<blockquote>
<p>There are two hard things in computer science: cache invalidation, naming things, and off-by-one errors - PhilKarlton</p>
</blockquote>
<p>As a new developer working on a project it becomes really hard to figure out what the structure is, and in the case of adding code what to name classes. Naming and structure always seem to be a developers achilles heel(almost akin to superman and kryptonite).</p>
<p>So, I wanted to come up with a solution to the problem, something more structured that helps facilitate better naming and structuring and the way I decided to do this is through dependency injection. </p>
<p>By now we are all familiar with Inversion of control, and comfortable using it to decouple dependencies within our applications. Most of us have dabbled with the usual suspects CastleWindsor, AutoFaq, Ninject to name a few. </p>
<p>One thing people don‚Äôt realise is we can also utilise these frameworks to enforce good structure as well as unit test the structure itself to ensure new developers don‚Äôt stray from the named path. For the examples below I&#39;m going to use Castle Windsor.</p>
<p>#Step 1 ‚Äì Define the structure and start naming the onion layers</p>
<p>The codebases of yester-year were usually architected using a n-tier structure typically following the pattern: </p>
<p>Presentation Layer (Controller) &gt; Business Layer (Service) &gt; Data Layer (Repository)</p>
<p>As time progressed new patterns emerged the structure became more complex however we still try to adopt some form of onion layering within the application. Whether it‚Äôs one onion or many within a single solution we should always strive to define what the layers are in the application.</p>
<p>So, to start we should define:</p>
<ol>
<li>What the onion layer is named (forming groups of similar classes).</li>
<li>What the responsibility of each layer is.</li>
</ol>
<p>#Step 2 ‚Äì Create your conventions</p>
<p>Now that we have some understanding of the layers, we can start defining them in code. I use an empty interface to do this. Note Castle distinguishes these layers as &#39;Conventions&#39;.</p>
<pre><code class="hljs language-csharp"><span class="code-line"><span class="line-number">1</span><span class="line-content"><span class="hljs-comment"><span class="hljs-doctag">///</span> A class that contains business logic, it also does not directly access any data source.</span></span></span>
<span class="code-line"><span class="line-number">2</span><span class="line-content"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IService</span></span></span>
<span class="code-line"><span class="line-number">3</span><span class="line-content">{</span></span>
<span class="code-line"><span class="line-number">4</span><span class="line-content">}</span></span></code></pre><p>Note the interface has no bearing on logic, and does not alter how the app behaves. It‚Äôs simply used as a marker to distinguish the layers of the application. A small description is also provided to define what the responsibility of the layer is. These conventions are also a way to document the structure of the application.</p>
<p>#Step 3 ‚Äì Install all dependency‚Äôs using the convention.</p>
<p>Now that we have a convention we can blanket install all classes subscribing to that convention, if your using castle Windsor there is a slight difference in how this is done depending on whether you apply the convention directly on the class itself or if you apply it to another interface.</p>
<p><strong>Applying it to an interface</strong></p>
<pre><code class="hljs language-csharp"><span class="code-line"><span class="line-number">1</span><span class="line-content"><span class="hljs-comment"><span class="hljs-doctag">///</span> A class that contains business logic, it also does not directly access any data source.</span></span></span>
<span class="code-line"><span class="line-number">2</span><span class="line-content"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IService</span></span></span>
<span class="code-line"><span class="line-number">3</span><span class="line-content">{</span></span>
<span class="code-line"><span class="line-number">4</span><span class="line-content">}</span></span>
<span class="code-line"><span class="line-number">5</span><span class="line-content"></span></span>
<span class="code-line"><span class="line-number">6</span><span class="line-content"><span class="hljs-comment"><span class="hljs-doctag">///</span> Blanket install all IServies</span></span></span>
<span class="code-line"><span class="line-number">7</span><span class="line-content">container.Register(Classes.FromAssembly(Assembly.Load(<span class="hljs-string">&quot;Assembly name goes here&quot;</span>))</span></span>
<span class="code-line"><span class="line-number">8</span><span class="line-content">    .BasedOn(IService)</span></span>
<span class="code-line"><span class="line-number">9</span><span class="line-content">    .WithService.AllInterfaces()</span></span>
<span class="code-line"><span class="line-number">10</span><span class="line-content">    .LifestyleSingleton());</span></span>
<span class="code-line"><span class="line-number">11</span><span class="line-content"></span></span>
<span class="code-line"><span class="line-number">12</span><span class="line-content"><span class="hljs-comment"><span class="hljs-doctag">///</span> Example usage</span></span></span>
<span class="code-line"><span class="line-number">13</span><span class="line-content"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">ICustomerService</span> : <span class="hljs-title">IService</span></span></span>
<span class="code-line"><span class="line-number">14</span><span class="line-content"><span class="hljs-title">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomerService</span> : <span class="hljs-title">ICustomerService</span></span></span></code></pre><p><strong>Applying it to a class</strong></p>
<p>When applying it to class the installation has a slight difference.</p>
<pre><code class="hljs language-csharp"><span class="code-line"><span class="line-number">1</span><span class="line-content"><span class="hljs-comment"><span class="hljs-doctag">///</span> A class that contains a business rule, it validates whether the rule has been met</span></span></span>
<span class="code-line"><span class="line-number">2</span><span class="line-content"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IRule</span></span></span>
<span class="code-line"><span class="line-number">3</span><span class="line-content">{</span></span>
<span class="code-line"><span class="line-number">4</span><span class="line-content"> <span class="hljs-function"><span class="hljs-built_in">string</span> <span class="hljs-title">ApplyRule</span>()</span>;</span></span>
<span class="code-line"><span class="line-number">5</span><span class="line-content">}</span></span>
<span class="code-line"><span class="line-number">6</span><span class="line-content"></span></span>
<span class="code-line"><span class="line-number">7</span><span class="line-content">container.Register(Classes.FromAssembly(Assembly.Load(<span class="hljs-string">&quot;Assembly name goes here&quot;</span>))</span></span>
<span class="code-line"><span class="line-number">8</span><span class="line-content"> .BasedOn(IRule)</span></span>
<span class="code-line"><span class="line-number">9</span><span class="line-content"> .WithService.Base()</span></span>
<span class="code-line"><span class="line-number">10</span><span class="line-content"> .LifestyleSingleton());</span></span>
<span class="code-line"><span class="line-number">11</span><span class="line-content"></span></span>
<span class="code-line"><span class="line-number">12</span><span class="line-content"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CustomerRule</span> : <span class="hljs-title">IRule</span></span></span></code></pre><p>When creating a new class that fits within a pre-defined convention installation becomes a walk in the park, just apply the convention interface and you‚Äôre done.</p>
<p>#Step 4 ‚Äì Unit testing structure</p>
<p>Now that we have our convention setup and we are installing all classes with that convention we can apply a unit tests that will check against the structure. We are testing on two things here:</p>
<ol>
<li>Only Services should have a‚ÄòService‚Äô Suffix</li>
<li>Only Services should exist in a ‚ÄòService‚Äô namespace</li>
</ol>
<pre><code class="hljs language-csharp"><span class="code-line"><span class="line-number">1</span><span class="line-content">[<span class="hljs-meta">TestFixture</span>]</span></span>
<span class="code-line"><span class="line-number">2</span><span class="line-content"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TestSolutionConventionTests</span></span></span>
<span class="code-line"><span class="line-number">3</span><span class="line-content">{</span></span>
<span class="code-line"><span class="line-number">4</span><span class="line-content">    [<span class="hljs-meta">SetUp</span>]</span></span>
<span class="code-line"><span class="line-number">5</span><span class="line-content">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Setup</span>()</span></span></span>
<span class="code-line"><span class="line-number">6</span><span class="line-content">    {</span></span>
<span class="code-line"><span class="line-number">7</span><span class="line-content">        <span class="hljs-comment">// Register all dependencys in the project using castle</span></span></span>
<span class="code-line"><span class="line-number">8</span><span class="line-content">        RegisterDependencies(); </span></span>
<span class="code-line"><span class="line-number">9</span><span class="line-content">    }</span></span>
<span class="code-line"><span class="line-number">10</span><span class="line-content"></span></span>
<span class="code-line"><span class="line-number">11</span><span class="line-content">    [<span class="hljs-meta">Test</span>]</span></span>
<span class="code-line"><span class="line-number">12</span><span class="line-content">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnlyServices_HaveServiceSuffix</span>()</span></span></span>
<span class="code-line"><span class="line-number">13</span><span class="line-content">    {</span></span>
<span class="code-line"><span class="line-number">14</span><span class="line-content">        <span class="hljs-comment">// Get access to IWindsorContainer</span></span></span>
<span class="code-line"><span class="line-number">15</span><span class="line-content">        <span class="hljs-keyword">var</span> container = DependencyResolver.Container; </span></span>
<span class="code-line"><span class="line-number">16</span><span class="line-content">        <span class="hljs-comment">// Get all classes in the application where the name ends with Service (using reflection).</span></span></span>
<span class="code-line"><span class="line-number">17</span><span class="line-content">        <span class="hljs-keyword">var</span> allServices = GetPublicClassesFromApplicationAssembly(c =&gt; c.Name.EndsWith(<span class="hljs-string">&quot;Service&quot;</span>), <span class="hljs-string">&quot;Assembly name where service exists goes here&quot;</span>);</span></span>
<span class="code-line"><span class="line-number">18</span><span class="line-content">        <span class="hljs-comment">// Get all services installed within castles container that use the interface IService</span></span></span>
<span class="code-line"><span class="line-number">19</span><span class="line-content">        <span class="hljs-keyword">var</span> registeredServices = GetImplementationTypesFor(<span class="hljs-keyword">typeof</span>(IService), container);</span></span>
<span class="code-line"><span class="line-number">20</span><span class="line-content"></span></span>
<span class="code-line"><span class="line-number">21</span><span class="line-content">        <span class="hljs-comment">// Assert the names all match and are equal</span></span></span>
<span class="code-line"><span class="line-number">22</span><span class="line-content">        allServices.ToList().Should().Equal(registeredManagers, (ac, rc) =&gt; ac.Name == rc.Name);</span></span>
<span class="code-line"><span class="line-number">23</span><span class="line-content">    }</span></span>
<span class="code-line"><span class="line-number">24</span><span class="line-content"></span></span>
<span class="code-line"><span class="line-number">25</span><span class="line-content">    [<span class="hljs-meta">Test</span>]</span></span>
<span class="code-line"><span class="line-number">26</span><span class="line-content">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnlyServices_LiveInServicesNamespace</span>()</span></span></span>
<span class="code-line"><span class="line-number">27</span><span class="line-content">    {</span></span>
<span class="code-line"><span class="line-number">28</span><span class="line-content">        <span class="hljs-keyword">var</span> container = DependencyResolver.Container; </span></span>
<span class="code-line"><span class="line-number">29</span><span class="line-content">        <span class="hljs-comment">// Get all classes in the application where the namespace contains Service</span></span></span>
<span class="code-line"><span class="line-number">30</span><span class="line-content">        <span class="hljs-keyword">var</span> allServices = GetPublicClassesFromApplicationAssembly(c =&gt; c.Namespace.Contains(<span class="hljs-string">&quot;Service&quot;</span>), <span class="hljs-string">&quot;Assembly name where service exists goes here&quot;</span>);</span></span>
<span class="code-line"><span class="line-number">31</span><span class="line-content">        <span class="hljs-keyword">var</span> registeredServices = GetImplementationTypesFor(<span class="hljs-keyword">typeof</span>(IService), container);</span></span>
<span class="code-line"><span class="line-number">32</span><span class="line-content"></span></span>
<span class="code-line"><span class="line-number">33</span><span class="line-content">        allServices.ToList().Should().Equal(registeredManager, (ac, rc) =&gt; ac.Name == rc.Name);</span></span>
<span class="code-line"><span class="line-number">34</span><span class="line-content">    }</span></span>
<span class="code-line"><span class="line-number">35</span><span class="line-content"></span></span>
<span class="code-line"><span class="line-number">36</span><span class="line-content">    <span class="hljs-function"><span class="hljs-keyword">private</span> Type[] <span class="hljs-title">GetPublicClassesFromApplicationAssembly</span>(<span class="hljs-params">Predicate <span class="hljs-keyword">where</span>, <span class="hljs-built_in">string</span> assemblyName</span>)</span></span></span>
<span class="code-line"><span class="line-number">37</span><span class="line-content">    {</span></span>
<span class="code-line"><span class="line-number">38</span><span class="line-content">        <span class="hljs-keyword">return</span> Assembly.Load(assemblyName).GetExportedTypes()</span></span>
<span class="code-line"><span class="line-number">39</span><span class="line-content">            .Where(t =&gt; t.IsClass)</span></span>
<span class="code-line"><span class="line-number">40</span><span class="line-content">            .Where(t =&gt; t.IsAbstract == <span class="hljs-literal">false</span>)</span></span>
<span class="code-line"><span class="line-number">41</span><span class="line-content">            .Where(<span class="hljs-keyword">where</span>.Invoke)</span></span>
<span class="code-line"><span class="line-number">42</span><span class="line-content">            .OrderBy(t =&gt; t.Name)</span></span>
<span class="code-line"><span class="line-number">43</span><span class="line-content">            .ToArray();</span></span>
<span class="code-line"><span class="line-number">44</span><span class="line-content">    }</span></span>
<span class="code-line"><span class="line-number">45</span><span class="line-content"></span></span>
<span class="code-line"><span class="line-number">46</span><span class="line-content">    <span class="hljs-function"><span class="hljs-keyword">private</span> Type[] <span class="hljs-title">GetImplementationTypesFor</span>(<span class="hljs-params">Type type, IWindsorContainer container</span>)</span></span></span>
<span class="code-line"><span class="line-number">47</span><span class="line-content">    {</span></span>
<span class="code-line"><span class="line-number">48</span><span class="line-content">        <span class="hljs-keyword">return</span> container.Kernel.GetAssignableHandlers(type)</span></span>
<span class="code-line"><span class="line-number">49</span><span class="line-content">            .Select(h =&gt; h.ComponentModel.Implementation)</span></span>
<span class="code-line"><span class="line-number">50</span><span class="line-content">            .OrderBy(t =&gt; t.Name)</span></span>
<span class="code-line"><span class="line-number">51</span><span class="line-content">            .ToArray();</span></span>
<span class="code-line"><span class="line-number">52</span><span class="line-content">    }</span></span>
<span class="code-line"><span class="line-number">53</span><span class="line-content">}</span></span></code></pre><p>Picture below describes what these unit tests protect against:</p>
<p><img src="//images.ctfassets.net/wjg1udsw901v/5DsNc00VzOuEgttxz02Wh0/a5d882981f31c1fad410cea2e30af5dd/conventionexample.jpg" alt="Convention Based Programming - Unit tests"></p>
<p>#Step 5 ‚Äì Introducing new conventions</p>
<p>As your solution evolves you‚Äôre going to come across certain scenarios where the responsibilities of a class don‚Äôt fit into the conventions defined (as we have a list of conventions with descriptions it‚Äôs easy to distinguish if a new convention is needed). These scenarios will mainly occur at the beginning phase of a new application (as its rapidly evolving) and as conventions get defined you will find that having to define a new one will become an increasingly rare activity.</p>
<p>This process should mitigate the scenario of having a customer/service/manager/provider‚Ä¶</p>
<p>#Step 6 ‚Äì Sharing conventions across projects unified code base</p>
<p>Once we‚Äôve established some conventions for a project we can easily extract these out into a separate project and package it as a NuGet package. This allows us to apply the conventions to other solutions giving us a unified structure that looks the same from one solution to another.</p>
<p>New developers will surely appreciate this, and as a co-worker sitting next to them the wtf count will be below uncomfortable thresholds!</p>
</div><div class="ShareButtons-module__iQZDeW__container"><div class="ShareButtons-module__iQZDeW__label">Share this article</div><div class="ShareButtons-module__iQZDeW__buttons"><a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fwww.faesel.com%2Fblog%2Fconvention-based-programming&amp;text=Fix%20poor%20project%20structure%20with%20Convention%20Based%20Programming" target="_blank" rel="noopener noreferrer" class="ShareButtons-module__iQZDeW__button ShareButtons-module__iQZDeW__twitter" aria-label="Share on Twitter"><svg viewBox="0 0 24 24" class="ShareButtons-module__iQZDeW__icon"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fwww.faesel.com%2Fblog%2Fconvention-based-programming" target="_blank" rel="noopener noreferrer" class="ShareButtons-module__iQZDeW__button ShareButtons-module__iQZDeW__linkedin" aria-label="Share on LinkedIn"><svg viewBox="0 0 24 24" class="ShareButtons-module__iQZDeW__icon"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.faesel.com%2Fblog%2Fconvention-based-programming" target="_blank" rel="noopener noreferrer" class="ShareButtons-module__iQZDeW__button ShareButtons-module__iQZDeW__facebook" aria-label="Share on Facebook"><svg viewBox="0 0 24 24" class="ShareButtons-module__iQZDeW__icon"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></a><a href="https://reddit.com/submit?url=https%3A%2F%2Fwww.faesel.com%2Fblog%2Fconvention-based-programming&amp;title=Fix%20poor%20project%20structure%20with%20Convention%20Based%20Programming" target="_blank" rel="noopener noreferrer" class="ShareButtons-module__iQZDeW__button ShareButtons-module__iQZDeW__reddit" aria-label="Share on Reddit"><svg viewBox="0 0 24 24" class="ShareButtons-module__iQZDeW__icon"><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"></path></svg></a><a href="mailto:?subject=Fix%20poor%20project%20structure%20with%20Convention%20Based%20Programming&amp;body=Having%20looked%20at%20a%20number%20of%20projects%20in%20my%20lifetime%2C%20I%20always%20come%20across%20classes%20named%20something%20like%20%22CustomerService%22%20with%20similar%20variations%20(usually%20in%20th%0A%0Ahttps%3A%2F%2Fwww.faesel.com%2Fblog%2Fconvention-based-programming" class="ShareButtons-module__iQZDeW__button ShareButtons-module__iQZDeW__email" aria-label="Share via Email"><svg viewBox="0 0 24 24" class="ShareButtons-module__iQZDeW__icon"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></svg></a><button class="ShareButtons-module__iQZDeW__button ShareButtons-module__iQZDeW__copy " aria-label="Copy link"><svg viewBox="0 0 24 24" class="ShareButtons-module__iQZDeW__icon"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg></button></div></div></article><!--$--><!--/$--></main><footer class="Footer-module__S6Hkya__footer"><div class="Footer-module__S6Hkya__container"><div class="Footer-module__S6Hkya__content"><nav class="Footer-module__S6Hkya__links" aria-label="Footer navigation"><a class="Footer-module__S6Hkya__link" href="/blog">Blog</a><a class="Footer-module__S6Hkya__link" href="/projects">Projects</a><a class="Footer-module__S6Hkya__link" href="/about">About</a><a class="Footer-module__S6Hkya__link" href="/contact">Contact</a></nav><p class="Footer-module__S6Hkya__copyright">¬© <!-- -->2026<!-- --> All rights reserved.</p></div></div></footer><script src="/_next/static/chunks/ba947f6798c3c403.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[31362,[\"/_next/static/chunks/8be72f203fe36d6f.js\"],\"default\"]\n3:I[2971,[\"/_next/static/chunks/8be72f203fe36d6f.js\"],\"default\"]\n4:I[39756,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/708205fa81a1891d.js\"],\"default\"]\n5:I[37457,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/708205fa81a1891d.js\"],\"default\"]\n6:I[22016,[\"/_next/static/chunks/8be72f203fe36d6f.js\",\"/_next/static/chunks/34e59d4fa8652639.js\"],\"\"]\n8:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/708205fa81a1891d.js\"],\"OutletBoundary\"]\n9:\"$Sreact.suspense\"\nb:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/708205fa81a1891d.js\"],\"ViewportBoundary\"]\nd:I[97367,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/708205fa81a1891d.js\"],\"MetadataBoundary\"]\nf:I[68027,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/708205fa81a1891d.js\"],\"default\"]\n:HL[\"/_next/static/chunks/19d110f125a6a880.css\",\"style\"]\n:HL[\"/_next/static/chunks/4c98436a675d5713.css\",\"style\"]\n:HL[\"/_next/static/chunks/578ca6ed020117e9.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"IJdQFSP3HviNokOy6LWwh\",\"c\":[\"\",\"blog\",\"convention-based-programming\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"convention-based-programming\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/19d110f125a6a880.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/8be72f203fe36d6f.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"script\",null,{\"type\":\"application/ld+json\",\"dangerouslySetInnerHTML\":{\"__html\":\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"Organization\\\",\\\"name\\\":\\\"Faesel Saeed\\\",\\\"url\\\":\\\"https://www.faesel.com\\\",\\\"logo\\\":{\\\"@type\\\":\\\"ImageObject\\\",\\\"url\\\":\\\"https://www.faesel.com/images/logo.png\\\"},\\\"sameAs\\\":[\\\"https://github.com/faesel\\\",\\\"https://www.linkedin.com/in/faesel-saeed-a97b1614\\\"]}\"}}],[\"$\",\"script\",null,{\"type\":\"application/ld+json\",\"dangerouslySetInnerHTML\":{\"__html\":\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"WebSite\\\",\\\"name\\\":\\\"FAESEL.COM\\\",\\\"url\\\":\\\"https://www.faesel.com\\\",\\\"description\\\":\\\"A modern tech blog exploring technology, coding, and digital innovation\\\",\\\"publisher\\\":{\\\"@type\\\":\\\"Organization\\\",\\\"name\\\":\\\"Faesel Saeed\\\",\\\"url\\\":\\\"https://www.faesel.com\\\"}}\"}}]]}],[\"$\",\"body\",null,{\"children\":[[\"$\",\"$L2\",null,{\"gaId\":\"G-Y039CLFJME\"}],[\"$\",\"a\",null,{\"href\":\"#main-content\",\"className\":\"skip-to-content\",\"children\":\"Skip to content\"}],[\"$\",\"$L3\",null,{}],[\"$\",\"main\",null,{\"id\":\"main-content\",\"style\":{\"minHeight\":\"70vh\"},\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"div\",null,{\"className\":\"not-found-module__HS70Aa__container\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"not-found-module__HS70Aa__title\",\"children\":\"404\"}],[\"$\",\"h2\",null,{\"className\":\"not-found-module__HS70Aa__subtitle\",\"children\":\"Page Not Found\"}],[\"$\",\"p\",null,{\"className\":\"not-found-module__HS70Aa__message\",\"children\":\"Sorry, the page you're looking for doesn't exist.\"}],[\"$\",\"$L6\",null,{\"href\":\"/\",\"className\":\"not-found-module__HS70Aa__homeLink\",\"children\":\"Go Home\"}]]}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/578ca6ed020117e9.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"footer\",null,{\"className\":\"Footer-module__S6Hkya__footer\",\"children\":[\"$\",\"div\",null,{\"className\":\"Footer-module__S6Hkya__container\",\"children\":[\"$\",\"div\",null,{\"className\":\"Footer-module__S6Hkya__content\",\"children\":[[\"$\",\"nav\",null,{\"className\":\"Footer-module__S6Hkya__links\",\"aria-label\":\"Footer navigation\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"/blog\",\"className\":\"Footer-module__S6Hkya__link\",\"children\":\"Blog\"}],[\"$\",\"$L6\",null,{\"href\":\"/projects\",\"className\":\"Footer-module__S6Hkya__link\",\"children\":\"Projects\"}],[\"$\",\"$L6\",null,{\"href\":\"/about\",\"className\":\"Footer-module__S6Hkya__link\",\"children\":\"About\"}],[\"$\",\"$L6\",null,{\"href\":\"/contact\",\"className\":\"Footer-module__S6Hkya__link\",\"children\":\"Contact\"}]]}],[\"$\",\"p\",null,{\"className\":\"Footer-module__S6Hkya__copyright\",\"children\":[\"¬© \",2026,\" All rights reserved.\"]}]]}]}]}]]}]]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L7\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/4c98436a675d5713.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/34e59d4fa8652639.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"$L8\",null,{\"children\":[\"$\",\"$9\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@a\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$Lb\",null,{\"children\":\"$Lc\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"$9\",null,{\"name\":\"Next.Metadata\",\"children\":\"$Le\"}]}]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$f\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"10:I[27201,[\"/_next/static/chunks/ff1a16fafef87110.js\",\"/_next/static/chunks/708205fa81a1891d.js\"],\"IconMark\"]\n11:I[5500,[\"/_next/static/chunks/8be72f203fe36d6f.js\",\"/_next/static/chunks/34e59d4fa8652639.js\"],\"Image\"]\n12:I[23150,[\"/_next/static/chunks/8be72f203fe36d6f.js\",\"/_next/static/chunks/34e59d4fa8652639.js\"],\"default\"]\na:null\n"])</script><script>self.__next_f.push([1,"e:[[\"$\",\"title\",\"0\",{\"children\":\"Fix poor project structure with Convention Based Programming | Tech Blog | FAESEL.COM\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Having looked at a number of projects in my lifetime, I always come across classes named something like \\\"CustomerService\\\" with similar variations (usually in th\"}],[\"$\",\"link\",\"2\",{\"rel\":\"author\",\"href\":\"https://www.faesel.com/about\"}],[\"$\",\"meta\",\"3\",{\"name\":\"author\",\"content\":\"Faesel Saeed\"}],[\"$\",\"meta\",\"4\",{\"name\":\"keywords\",\"content\":\"convention,unit-test,project-structure\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:title\",\"content\":\"Fix poor project structure with Convention Based Programming\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:description\",\"content\":\"Having looked at a number of projects in my lifetime, I always come across classes named something like \\\"CustomerService\\\" with similar variations (usually in th\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:image\",\"content\":\"https://images.ctfassets.net/wjg1udsw901v/27s4Gn7WXRTKhSaaWBU2RN/c057b731733a4d8943365bdeaeb71147/alain-pham-P_qvsF7Yodw-unsplash.jpg\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"9\",{\"property\":\"article:published_time\",\"content\":\"2017-08-20T00:00+01:00\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:site\",\"content\":\"@faeselsaeed\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:creator\",\"content\":\"@faeselsaeed\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:title\",\"content\":\"Fix poor project structure with Convention Based Programming\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:description\",\"content\":\"Having looked at a number of projects in my lifetime, I always come across classes named something like \\\"CustomerService\\\" with similar variations (usually in th\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:image\",\"content\":\"https://images.ctfassets.net/wjg1udsw901v/27s4Gn7WXRTKhSaaWBU2RN/c057b731733a4d8943365bdeaeb71147/alain-pham-P_qvsF7Yodw-unsplash.jpg\"}],[\"$\",\"link\",\"16\",{\"rel\":\"shortcut icon\",\"href\":\"/favicon.ico\"}],[\"$\",\"link\",\"17\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\"}],[\"$\",\"link\",\"18\",{\"rel\":\"apple-touch-icon\",\"href\":\"/favicon.ico\"}],[\"$\",\"$L10\",\"19\",{}]]\n"])</script><script>self.__next_f.push([1,"13:T4d02,"])</script><script>self.__next_f.push([1,"\u003cp\u003eHaving looked at a number of projects in my lifetime, I always come across classes named something like \u0026quot;CustomerService\u0026quot; with similar variations (usually in the same project calling each other) ranging from \u0026quot;CustomerProvider / Helper /Manager / Store / etc...\u0026quot;.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThere are two hard things in computer science: cache invalidation, naming things, and off-by-one errors - PhilKarlton\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eAs a new developer working on a project it becomes really hard to figure out what the structure is, and in the case of adding code what to name classes. Naming and structure always seem to be a developers achilles heel(almost akin to superman and kryptonite).\u003c/p\u003e\n\u003cp\u003eSo, I wanted to come up with a solution to the problem, something more structured that helps facilitate better naming and structuring and the way I decided to do this is through dependency injection. \u003c/p\u003e\n\u003cp\u003eBy now we are all familiar with Inversion of control, and comfortable using it to decouple dependencies within our applications. Most of us have dabbled with the usual suspects CastleWindsor, AutoFaq, Ninject to name a few. \u003c/p\u003e\n\u003cp\u003eOne thing people don‚Äôt realise is we can also utilise these frameworks to enforce good structure as well as unit test the structure itself to ensure new developers don‚Äôt stray from the named path. For the examples below I\u0026#39;m going to use Castle Windsor.\u003c/p\u003e\n\u003cp\u003e#Step 1 ‚Äì Define the structure and start naming the onion layers\u003c/p\u003e\n\u003cp\u003eThe codebases of yester-year were usually architected using a n-tier structure typically following the pattern: \u003c/p\u003e\n\u003cp\u003ePresentation Layer (Controller) \u0026gt; Business Layer (Service) \u0026gt; Data Layer (Repository)\u003c/p\u003e\n\u003cp\u003eAs time progressed new patterns emerged the structure became more complex however we still try to adopt some form of onion layering within the application. Whether it‚Äôs one onion or many within a single solution we should always strive to define what the layers are in the application.\u003c/p\u003e\n\u003cp\u003eSo, to start we should define:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eWhat the onion layer is named (forming groups of similar classes).\u003c/li\u003e\n\u003cli\u003eWhat the responsibility of each layer is.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e#Step 2 ‚Äì Create your conventions\u003c/p\u003e\n\u003cp\u003eNow that we have some understanding of the layers, we can start defining them in code. I use an empty interface to do this. Note Castle distinguishes these layers as \u0026#39;Conventions\u0026#39;.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-csharp\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e1\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003cspan class=\"hljs-comment\"\u003e\u003cspan class=\"hljs-doctag\"\u003e///\u003c/span\u003e A class that contains business logic, it also does not directly access any data source.\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e2\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eIService\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e3\u003c/span\u003e\u003cspan class=\"line-content\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e4\u003c/span\u003e\u003cspan class=\"line-content\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNote the interface has no bearing on logic, and does not alter how the app behaves. It‚Äôs simply used as a marker to distinguish the layers of the application. A small description is also provided to define what the responsibility of the layer is. These conventions are also a way to document the structure of the application.\u003c/p\u003e\n\u003cp\u003e#Step 3 ‚Äì Install all dependency‚Äôs using the convention.\u003c/p\u003e\n\u003cp\u003eNow that we have a convention we can blanket install all classes subscribing to that convention, if your using castle Windsor there is a slight difference in how this is done depending on whether you apply the convention directly on the class itself or if you apply it to another interface.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eApplying it to an interface\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-csharp\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e1\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003cspan class=\"hljs-comment\"\u003e\u003cspan class=\"hljs-doctag\"\u003e///\u003c/span\u003e A class that contains business logic, it also does not directly access any data source.\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e2\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eIService\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e3\u003c/span\u003e\u003cspan class=\"line-content\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e4\u003c/span\u003e\u003cspan class=\"line-content\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e5\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e6\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003cspan class=\"hljs-comment\"\u003e\u003cspan class=\"hljs-doctag\"\u003e///\u003c/span\u003e Blanket install all IServies\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e7\u003c/span\u003e\u003cspan class=\"line-content\"\u003econtainer.Register(Classes.FromAssembly(Assembly.Load(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Assembly name goes here\u0026quot;\u003c/span\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e8\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    .BasedOn(IService)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e9\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    .WithService.AllInterfaces()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e10\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    .LifestyleSingleton());\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e11\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e12\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003cspan class=\"hljs-comment\"\u003e\u003cspan class=\"hljs-doctag\"\u003e///\u003c/span\u003e Example usage\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e13\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eICustomerService\u003c/span\u003e : \u003cspan class=\"hljs-title\"\u003eIService\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e14\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003cspan class=\"hljs-title\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eCustomerService\u003c/span\u003e : \u003cspan class=\"hljs-title\"\u003eICustomerService\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eApplying it to a class\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eWhen applying it to class the installation has a slight difference.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-csharp\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e1\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003cspan class=\"hljs-comment\"\u003e\u003cspan class=\"hljs-doctag\"\u003e///\u003c/span\u003e A class that contains a business rule, it validates whether the rule has been met\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e2\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eIRule\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e3\u003c/span\u003e\u003cspan class=\"line-content\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e4\u003c/span\u003e\u003cspan class=\"line-content\"\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eApplyRule\u003c/span\u003e()\u003c/span\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e5\u003c/span\u003e\u003cspan class=\"line-content\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e6\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e7\u003c/span\u003e\u003cspan class=\"line-content\"\u003econtainer.Register(Classes.FromAssembly(Assembly.Load(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Assembly name goes here\u0026quot;\u003c/span\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e8\u003c/span\u003e\u003cspan class=\"line-content\"\u003e .BasedOn(IRule)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e9\u003c/span\u003e\u003cspan class=\"line-content\"\u003e .WithService.Base()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e10\u003c/span\u003e\u003cspan class=\"line-content\"\u003e .LifestyleSingleton());\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e11\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e12\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eCustomerRule\u003c/span\u003e : \u003cspan class=\"hljs-title\"\u003eIRule\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eWhen creating a new class that fits within a pre-defined convention installation becomes a walk in the park, just apply the convention interface and you‚Äôre done.\u003c/p\u003e\n\u003cp\u003e#Step 4 ‚Äì Unit testing structure\u003c/p\u003e\n\u003cp\u003eNow that we have our convention setup and we are installing all classes with that convention we can apply a unit tests that will check against the structure. We are testing on two things here:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eOnly Services should have a‚ÄòService‚Äô Suffix\u003c/li\u003e\n\u003cli\u003eOnly Services should exist in a ‚ÄòService‚Äô namespace\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-csharp\"\u003e\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e1\u003c/span\u003e\u003cspan class=\"line-content\"\u003e[\u003cspan class=\"hljs-meta\"\u003eTestFixture\u003c/span\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e2\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTestSolutionConventionTests\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e3\u003c/span\u003e\u003cspan class=\"line-content\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e4\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    [\u003cspan class=\"hljs-meta\"\u003eSetUp\u003c/span\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e5\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eSetup\u003c/span\u003e()\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e6\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e7\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        \u003cspan class=\"hljs-comment\"\u003e// Register all dependencys in the project using castle\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e8\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        RegisterDependencies(); \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e9\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e10\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e11\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    [\u003cspan class=\"hljs-meta\"\u003eTest\u003c/span\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e12\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eOnlyServices_HaveServiceSuffix\u003c/span\u003e()\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e13\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e14\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        \u003cspan class=\"hljs-comment\"\u003e// Get access to IWindsorContainer\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e15\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e container = DependencyResolver.Container; \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e16\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        \u003cspan class=\"hljs-comment\"\u003e// Get all classes in the application where the name ends with Service (using reflection).\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e17\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e allServices = GetPublicClassesFromApplicationAssembly(c =\u0026gt; c.Name.EndsWith(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Service\u0026quot;\u003c/span\u003e), \u003cspan class=\"hljs-string\"\u003e\u0026quot;Assembly name where service exists goes here\u0026quot;\u003c/span\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e18\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        \u003cspan class=\"hljs-comment\"\u003e// Get all services installed within castles container that use the interface IService\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e19\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e registeredServices = GetImplementationTypesFor(\u003cspan class=\"hljs-keyword\"\u003etypeof\u003c/span\u003e(IService), container);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e20\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e21\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        \u003cspan class=\"hljs-comment\"\u003e// Assert the names all match and are equal\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e22\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        allServices.ToList().Should().Equal(registeredManagers, (ac, rc) =\u0026gt; ac.Name == rc.Name);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e23\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e24\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e25\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    [\u003cspan class=\"hljs-meta\"\u003eTest\u003c/span\u003e]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e26\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eOnlyServices_LiveInServicesNamespace\u003c/span\u003e()\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e27\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e28\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e container = DependencyResolver.Container; \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e29\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        \u003cspan class=\"hljs-comment\"\u003e// Get all classes in the application where the namespace contains Service\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e30\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e allServices = GetPublicClassesFromApplicationAssembly(c =\u0026gt; c.Namespace.Contains(\u003cspan class=\"hljs-string\"\u003e\u0026quot;Service\u0026quot;\u003c/span\u003e), \u003cspan class=\"hljs-string\"\u003e\u0026quot;Assembly name where service exists goes here\u0026quot;\u003c/span\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e31\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e registeredServices = GetImplementationTypesFor(\u003cspan class=\"hljs-keyword\"\u003etypeof\u003c/span\u003e(IService), container);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e32\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e33\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        allServices.ToList().Should().Equal(registeredManager, (ac, rc) =\u0026gt; ac.Name == rc.Name);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e34\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e35\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e36\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e Type[] \u003cspan class=\"hljs-title\"\u003eGetPublicClassesFromApplicationAssembly\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ePredicate \u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e assemblyName\u003c/span\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e37\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e38\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e Assembly.Load(assemblyName).GetExportedTypes()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e39\u003c/span\u003e\u003cspan class=\"line-content\"\u003e            .Where(t =\u0026gt; t.IsClass)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e40\u003c/span\u003e\u003cspan class=\"line-content\"\u003e            .Where(t =\u0026gt; t.IsAbstract == \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e41\u003c/span\u003e\u003cspan class=\"line-content\"\u003e            .Where(\u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e.Invoke)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e42\u003c/span\u003e\u003cspan class=\"line-content\"\u003e            .OrderBy(t =\u0026gt; t.Name)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e43\u003c/span\u003e\u003cspan class=\"line-content\"\u003e            .ToArray();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e44\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e45\u003c/span\u003e\u003cspan class=\"line-content\"\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e46\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprivate\u003c/span\u003e Type[] \u003cspan class=\"hljs-title\"\u003eGetImplementationTypesFor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eType type, IWindsorContainer container\u003c/span\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e47\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e48\u003c/span\u003e\u003cspan class=\"line-content\"\u003e        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e container.Kernel.GetAssignableHandlers(type)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e49\u003c/span\u003e\u003cspan class=\"line-content\"\u003e            .Select(h =\u0026gt; h.ComponentModel.Implementation)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e50\u003c/span\u003e\u003cspan class=\"line-content\"\u003e            .OrderBy(t =\u0026gt; t.Name)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e51\u003c/span\u003e\u003cspan class=\"line-content\"\u003e            .ToArray();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e52\u003c/span\u003e\u003cspan class=\"line-content\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"code-line\"\u003e\u003cspan class=\"line-number\"\u003e53\u003c/span\u003e\u003cspan class=\"line-content\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003ePicture below describes what these unit tests protect against:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"//images.ctfassets.net/wjg1udsw901v/5DsNc00VzOuEgttxz02Wh0/a5d882981f31c1fad410cea2e30af5dd/conventionexample.jpg\" alt=\"Convention Based Programming - Unit tests\"\u003e\u003c/p\u003e\n\u003cp\u003e#Step 5 ‚Äì Introducing new conventions\u003c/p\u003e\n\u003cp\u003eAs your solution evolves you‚Äôre going to come across certain scenarios where the responsibilities of a class don‚Äôt fit into the conventions defined (as we have a list of conventions with descriptions it‚Äôs easy to distinguish if a new convention is needed). These scenarios will mainly occur at the beginning phase of a new application (as its rapidly evolving) and as conventions get defined you will find that having to define a new one will become an increasingly rare activity.\u003c/p\u003e\n\u003cp\u003eThis process should mitigate the scenario of having a customer/service/manager/provider‚Ä¶\u003c/p\u003e\n\u003cp\u003e#Step 6 ‚Äì Sharing conventions across projects unified code base\u003c/p\u003e\n\u003cp\u003eOnce we‚Äôve established some conventions for a project we can easily extract these out into a separate project and package it as a NuGet package. This allows us to apply the conventions to other solutions giving us a unified structure that looks the same from one solution to another.\u003c/p\u003e\n\u003cp\u003eNew developers will surely appreciate this, and as a co-worker sitting next to them the wtf count will be below uncomfortable thresholds!\u003c/p\u003e\n"])</script><script>self.__next_f.push([1,"7:[[\"$\",\"script\",null,{\"type\":\"application/ld+json\",\"dangerouslySetInnerHTML\":{\"__html\":\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"BlogPosting\\\",\\\"headline\\\":\\\"Fix poor project structure with Convention Based Programming\\\",\\\"description\\\":\\\"Having looked at a number of projects in my lifetime, I always come across classes named something like \\\\\\\"CustomerService\\\\\\\" with similar variations (usually in th\\\",\\\"image\\\":\\\"https://images.ctfassets.net/wjg1udsw901v/27s4Gn7WXRTKhSaaWBU2RN/c057b731733a4d8943365bdeaeb71147/alain-pham-P_qvsF7Yodw-unsplash.jpg\\\",\\\"datePublished\\\":\\\"2017-08-20T00:00+01:00\\\",\\\"dateModified\\\":\\\"2017-08-20T00:00+01:00\\\",\\\"author\\\":{\\\"@type\\\":\\\"Person\\\",\\\"name\\\":\\\"Faesel Saeed\\\",\\\"url\\\":\\\"https://www.faesel.com/about\\\"},\\\"publisher\\\":{\\\"@type\\\":\\\"Organization\\\",\\\"name\\\":\\\"Faesel Saeed\\\",\\\"url\\\":\\\"https://www.faesel.com\\\",\\\"logo\\\":{\\\"@type\\\":\\\"ImageObject\\\",\\\"url\\\":\\\"https://www.faesel.com/images/logo.png\\\"}},\\\"keywords\\\":\\\"convention, unit-test, project-structure\\\",\\\"url\\\":\\\"https://www.faesel.com/blog/convention-based-programming\\\",\\\"mainEntityOfPage\\\":{\\\"@type\\\":\\\"WebPage\\\",\\\"@id\\\":\\\"https://www.faesel.com/blog/convention-based-programming\\\"}}\"}}],[\"$\",\"script\",null,{\"type\":\"application/ld+json\",\"dangerouslySetInnerHTML\":{\"__html\":\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"BreadcrumbList\\\",\\\"itemListElement\\\":[{\\\"@type\\\":\\\"ListItem\\\",\\\"position\\\":1,\\\"name\\\":\\\"Home\\\",\\\"item\\\":\\\"https://www.faesel.com\\\"},{\\\"@type\\\":\\\"ListItem\\\",\\\"position\\\":2,\\\"name\\\":\\\"Blog\\\",\\\"item\\\":\\\"https://www.faesel.com/blog\\\"},{\\\"@type\\\":\\\"ListItem\\\",\\\"position\\\":3,\\\"name\\\":\\\"Fix poor project structure with Convention Based Programming\\\",\\\"item\\\":\\\"https://www.faesel.com/blog/convention-based-programming\\\"}]}\"}}],[\"$\",\"article\",null,{\"className\":\"page-module__dgei_G__article\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"/blog\",\"className\":\"page-module__dgei_G__backLink\",\"children\":\"‚Üê Back to Blog\"}],[\"$\",\"header\",null,{\"className\":\"page-module__dgei_G__header\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"page-module__dgei_G__title\",\"children\":\"Fix poor project structure with Convention Based Programming\"}],[\"$\",\"div\",null,{\"className\":\"page-module__dgei_G__meta\",\"children\":[[\"$\",\"time\",null,{\"className\":\"page-module__dgei_G__date\",\"dateTime\":\"2017-08-20T00:00+01:00\",\"children\":[\"üìÖ \",\"August 19, 2017\"]}],[\"$\",\"span\",null,{\"className\":\"page-module__dgei_G__separator\",\"children\":\"‚Ä¢\"}],[\"$\",\"span\",null,{\"className\":\"page-module__dgei_G__readingTime\",\"children\":[\"‚è±Ô∏è \",\"5 min read\"]}]]}],[\"$\",\"div\",null,{\"className\":\"page-module__dgei_G__tags\",\"children\":[[\"$\",\"span\",\"convention-0\",{\"className\":\"page-module__dgei_G__tag\",\"children\":\"convention\"}],[\"$\",\"span\",\"unit-test-1\",{\"className\":\"page-module__dgei_G__tag\",\"children\":\"unit-test\"}],[\"$\",\"span\",\"project-structure-2\",{\"className\":\"page-module__dgei_G__tag\",\"children\":\"project-structure\"}]]}]]}],[\"$\",\"div\",null,{\"className\":\"page-module__dgei_G__heroImage\",\"children\":[\"$\",\"$L11\",null,{\"src\":\"https://images.ctfassets.net/wjg1udsw901v/27s4Gn7WXRTKhSaaWBU2RN/c057b731733a4d8943365bdeaeb71147/alain-pham-P_qvsF7Yodw-unsplash.jpg\",\"alt\":\"Fix poor project structure with Convention Based Programming\",\"fill\":true,\"className\":\"page-module__dgei_G__heroImageImg\",\"priority\":true,\"sizes\":\"(max-width: 800px) 100vw, 800px\"}]}],[\"$\",\"$L12\",null,{\"url\":\"https://www.faesel.com/blog/convention-based-programming\",\"title\":\"Fix poor project structure with Convention Based Programming\",\"description\":\"Having looked at a number of projects in my lifetime, I always come across classes named something like \\\"CustomerService\\\" with similar variations (usually in th\",\"variant\":\"sidebar\"}],[\"$\",\"div\",null,{\"className\":\"page-module__dgei_G__content\",\"dangerouslySetInnerHTML\":{\"__html\":\"$13\"}}],\"$L14\"]}]]\n"])</script><script>self.__next_f.push([1,"14:[\"$\",\"$L12\",null,{\"url\":\"https://www.faesel.com/blog/convention-based-programming\",\"title\":\"Fix poor project structure with Convention Based Programming\",\"description\":\"Having looked at a number of projects in my lifetime, I always come across classes named something like \\\"CustomerService\\\" with similar variations (usually in th\"}]\n"])</script></body></html>