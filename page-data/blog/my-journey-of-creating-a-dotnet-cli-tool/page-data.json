{"componentChunkName":"component---src-templates-blog-js","path":"/blog/my-journey-of-creating-a-dotnet-cli-tool","result":{"data":{"site":{"siteMetadata":{"siteUrl":"https://www.faesel.com"}},"contentfulBlog":{"title":"My journey of creating a .NET CLI tool","slug":"my-journey-of-creating-a-dotnet-cli-tool","tags":["cli","azure","queues","table-storage","containers","blob","azure-storage","dotnet-tools","az-lazy","azure","console","commandline","dotnet-tools"],"hero":{"file":{"url":"//images.ctfassets.net/wjg1udsw901v/5nkhsfNMJDJ5NGcAfvQ2Lt/a2ac18006da7a4865044b77365b55987/AzLazy.png"},"title":"Az Lazy"},"datePublished":"December 18th, 2020","iso8601DatePublished":"2020-12-18T00:00:00.000Z","bodym":{"childMarkdownRemark":{"excerpt":"Why I started building a CLI As a .NET engineer, I…","timeToRead":10,"html":"<h1 id=\"why-i-started-building-a-cli\" style=\"position:relative;\"><a href=\"#why-i-started-building-a-cli\" aria-label=\"why i started building a cli permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why I started building a CLI</h1>\n<p>As a .NET engineer, I work with Azure storage a lot, its versatility, ease of use, as well as cost makes it a common staple amongst developers. Its application is also widespread from leveraging queues on a basic console app to storing uploaded images from a web application.</p>\n<p>Typically as an engineer, I have always interfaced with azure storage using <a href=\"https://azure.microsoft.com/en-gb/features/storage-explorer/#features\" target=\"_blank\" rel=\"nofollow\">Azure Storage Manager</a>, but as a UI tool, its always been two clicks away from the information I need or was just slow to navigate. </p>\n<p>So I ended up taking my destiny into my own hands and built a CLI tool called <a href=\"https://github.com/faesel/az-lazy\" target=\"_blank\" rel=\"nofollow\">Az-Lazy</a>.</p>\n<h1 id=\"packages-used-when-i-started\" style=\"position:relative;\"><a href=\"#packages-used-when-i-started\" aria-label=\"packages used when i started permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Packages used when I started</h1>\n<p>So as with all projects, I started with a shopping list of packages I wanted to use/needed to make a great CLI experience. </p>\n<h3 id=\"1-commandlineparser\" style=\"position:relative;\"><a href=\"#1-commandlineparser\" aria-label=\"1 commandlineparser permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. <a href=\"https://github.com/commandlineparser/commandline\" target=\"_blank\" rel=\"nofollow\">CommandLineParser</a></h3>\n<p>Whilst there are many command parsers on the market, I found this implementation particular nice to use. The end result allows you to to get a command pattern similar to most of the Microsoft dotnet tools,  <code>azlazy connection --list</code>.</p>\n<p>Defining available commands is as easy as decorating a class with attributes, and the help options for each command is automatically generated for you (azlazy addcontainer --help).</p>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">[Verb(&quot;addcontainer&quot;, HelpText = &quot;Creates a new storage container&quot;)]\n    public class AddContainerOptions : ICommandOptions\n    {\n        [Option(&#39;n&#39;, &quot;name&quot;, Required = true, HelpText = &quot;Name of the container to create&quot;)]\n        public string Name { get; set; }\n\n        [Option(&#39;p&#39;, &quot;publicAccess&quot;, Required = false, HelpText = &quot;Options are None, Blob, BlobContainer&quot;)]\n        public string PublicAccess { get; set; }\n    }</code>\n        </deckgo-highlight-code>\n      \n<h3 id=\"2-pastel\" style=\"position:relative;\"><a href=\"#2-pastel\" aria-label=\"2 pastel permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. <a href=\"https://github.com/silkfire/Pastel\" target=\"_blank\" rel=\"nofollow\">Pastel</a></h3>\n<p>Splash of colour is always a sign of a great CLI experience and seeing red or green are key indicators of successful execution of a command. <em>Pastel</em> lets you do exactly that! its got a range of preset vibrant colours to choose from and allows you to easily RGB your console output. </p>\n<p>The extension method style syntax is also great and doesn't distract you away from the code.</p>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">&quot;You successfully deleted all your data&quot;.Pastel(Color.LightGreen);</code>\n        </deckgo-highlight-code>\n      \n<h3 id=\"3-consoletables\" style=\"position:relative;\"><a href=\"#3-consoletables\" aria-label=\"3 consoletables permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. <a href=\"https://github.com/khalidabuhakmeh/ConsoleTables\" target=\"_blank\" rel=\"nofollow\">ConsoleTables</a></h3>\n<p>As Az-Lazy deals with table storeage, it was only a matter of time till i needed to output a table to the console. After a quick search on Nuget Gallery <em>ConsoleTables</em> showed up. With a simple minimilist table implementation it was quick to get setup,</p>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">var table = new ConsoleTable(&quot;Id&quot;, &quot;Blob&quot;, &quot;Size&quot;);\ntable.AddRow(1, &quot;dinopic1.jpg&quot;, 300)\n     .AddRow(2, &quot;dinopic2.jpb&quot;, 450);\n\ntable.Write();</code>\n        </deckgo-highlight-code>\n      \n<p>However, I later had to drop this package for something slightly more advanced (Alba.CsConsoleFormat) as I needed to word wrap large cells (particularly when displaying JSON snippets). </p>\n<h3 id=\"4-albacsconsoleformat\" style=\"position:relative;\"><a href=\"#4-albacsconsoleformat\" aria-label=\"4 albacsconsoleformat permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. <a href=\"https://github.com/Athari/CsConsoleFormat\" target=\"_blank\" rel=\"nofollow\">Alba.CsConsoleFormat</a></h3>\n<p>As mentioned above <em>Alba.CsConsoleFormat</em> was a replacement package to render tables. With great options to not only style your table with colours but also specify word wrap options, it was a good choice for rendering large volumes of data.</p>\n<p>I did find its syntax a little verbose to work with,</p>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">var headerThickness = new LineThickness(LineWidth.Double, LineWidth.Single);\n\nvar doc = new Document(\n    new Span(&quot;Dinosaurs #&quot;) { Color = Yellow }, Order.Id, &quot;\\n&quot;,\n    new Span(&quot;Type: &quot;) { Color = Yellow }, Order.Customer.Name,\n    new Grid {\n        Color = Gray,\n        Columns = { GridLength.Auto, GridLength.Star(1), GridLength.Auto },\n        Children = {\n            new Cell(&quot;Id&quot;) { Stroke = headerThickness },\n            new Cell(&quot;Name&quot;) { Stroke = headerThickness },\n            new Cell(&quot;Count&quot;) { Stroke = headerThickness },\n            Order.OrderItems.Select(item =&gt; new[] {\n                new Cell(item.Id),\n                new Cell(item.Name),\n                new Cell(item.Count) { Align = Align.Right },\n            })\n        }\n    }\n);\n\nConsoleRenderer.RenderDocument(doc);</code>\n        </deckgo-highlight-code>\n      \n<p>Buy my oh my does it produce a great console table 👨‍🎨</p>\n<p><img src=\"//images.ctfassets.net/wjg1udsw901v/tfEbNlJ8U1oqZCdmXGfq0/7d9eae3125e0c3053c4dfe91335a104e/peekmessages.png\" alt=\"CsConsoleFormat table output\"></p>\n<h3 id=\"5-litedb\" style=\"position:relative;\"><a href=\"#5-litedb\" aria-label=\"5 litedb permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. <a href=\"https://github.com/mbdavid/LiteDB\" target=\"_blank\" rel=\"nofollow\">LiteDb</a></h3>\n<p>One of the requirements of Az-Lazy was to store a list of connections to be reused at any time. Since CLI's don't have any state, I needed a lightweight storage mechanism that can easily ship with the tool.</p>\n<p>In comes <em>LiteDb</em>! With its entity framework style CRUD syntax, I really felt at home with this framework,</p>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">// Create your POCO class\npublic class Dinosaur\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public int Age { get; set; }\n}\n\nusing(var db = new LiteDatabase(@&quot;DinoDb.db&quot;))\n{\n    var collection = db.GetCollection&lt;Dinosaur&gt;(&quot;dinosaurs&quot;);\n\n    var dinosaur = new Dinosaur\n    { \n        Id = 1\n        Name = &quot;T-Rex&quot;, \n        Age = 39\n    };\n\n    collection.Insert(dinosaur);\n\n    var oldDinosaurs = col.Find(x =&gt; x.Age &gt; 50);\n}</code>\n        </deckgo-highlight-code>\n      \n<p>Since <em>LiteDb</em> stores all its data into one file, from a tool perspective it ensures your not littering your client's computer with files.</p>\n<h1 id=\"packages-used-now\" style=\"position:relative;\"><a href=\"#packages-used-now\" aria-label=\"packages used now permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Packages used now</h1>\n<h3 id=\"1-commandlineparser-1\" style=\"position:relative;\"><a href=\"#1-commandlineparser-1\" aria-label=\"1 commandlineparser 1 permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. <a href=\"https://github.com/commandlineparser/commandline\" target=\"_blank\" rel=\"nofollow\">CommandLineParser</a></h3>\n<p>I've still continued to use <em>CommandLineParser</em> however it's starting to hit some limitations, namely nesting of commands. So something like <code>azlazy connection add --name \"test\" --connection \"connectionString\"</code> is not allowed.</p>\n<p>Whilst this package has been great to get me started, I might start looking at other options as Az-Lazy starts supporting more complex commands.</p>\n<h3 id=\"2-litedb\" style=\"position:relative;\"><a href=\"#2-litedb\" aria-label=\"2 litedb permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. <a href=\"https://github.com/mbdavid/LiteDB\" target=\"_blank\" rel=\"nofollow\">LiteDb</a></h3>\n<p>It just works, still happy with this package. Really recommend it for CLI tools!</p>\n<h3 id=\"2-spectreconsole\" style=\"position:relative;\"><a href=\"#2-spectreconsole\" aria-label=\"2 spectreconsole permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. <a href=\"https://github.com/spectresystems/spectre.console\" target=\"_blank\" rel=\"nofollow\">Spectre.Console</a></h3>\n<p><em>Spectre.Console</em> was a big find for me, from the writer of <a href=\"https://github.com/cake-build/cake\" target=\"_blank\" rel=\"nofollow\">Cake</a> (<a href=\"https://github.com/patriksvensson\" target=\"_blank\" rel=\"nofollow\">Patrik Svensson</a>) it's a one-stop-shop for all your CLI needs. Just to name a few of the features,</p>\n<ul>\n<li>Console Colours</li>\n<li>Progress bars</li>\n<li>Tables</li>\n<li>Prompts</li>\n<li>Spinners</li>\n</ul>\n<p>After discovering this package I ended up doing a NuGet cull 🪓 which is why this list now stops at 3 (That culls still in progress as I'm removing Pascal for Specters implementation).</p>\n<p>I won't go into all the code samples for this, but here are a few, beginning with progress indicators (also note the syntax to colour the output).</p>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">await AnsiConsole.Progress()\n    .StartAsync(async ctx =&gt;\n    {\n        // Define tasks\n        var dinoTask = ctx.AddTask(&quot;[green]Uploading dinosaurs[/]&quot;);\n\n        while (!ctx.IsFinished)\n        {\n            // Simulate some work\n            await Task.Delay(250);\n            dinoTask.Increment(1.5);\n        }\n    });</code>\n        </deckgo-highlight-code>\n      \n<p>Check out how it looks in action, it's great for long-running tasks.</p>\n<p><img src=\"//images.ctfassets.net/wjg1udsw901v/7I5IMPuMYHvUIUyan3iNLY/d7b5e472fed4daba62218d4d2d3165ee/uploaddirectory.png\" alt=\"Upload progress bar\"></p>\n<p>Table's are also strightforward to create,</p>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">// Create a table\nvar table = new Table();\n\n// Add some columns\ntable.AddColumn(&quot;Foo&quot;);\ntable.AddColumn(new TableColumn(&quot;Bar&quot;).Centered());\n\n// Add some rows\ntable.AddRow(&quot;Baz&quot;, &quot;[green]Qux[/]&quot;);\ntable.AddRow(new Markup(&quot;[blue]Corgi[/]&quot;), new Panel(&quot;Waldo&quot;));\n\n// Render the table to the console\nAnsiConsole.Render(table);</code>\n        </deckgo-highlight-code>\n      \n<h1 id=\"other-great-code-snippets\" style=\"position:relative;\"><a href=\"#other-great-code-snippets\" aria-label=\"other great code snippets permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Other great code snippets</h1>\n<p>The only thing lacking for me in <em>Specter.Console</em> was display a tree structure which is useful for folder hierarchies, (there is an open issue here if you want to <a href=\"https://github.com/spectresystems/spectre.console/issues/144\" target=\"_blank\" rel=\"nofollow\">show your interest</a>) 🙏.</p>\n<p>To fulfil this requirement, I found a great article by Andrew Lock which renders this structure, <a href=\"https://andrewlock.net/creating-an-ascii-art-tree-in-csharp/\" target=\"_blank\" rel=\"nofollow\">Creating an ASCII-art tree in C#</a>. Here's what it looks like for me,</p>\n<p><img src=\"//images.ctfassets.net/wjg1udsw901v/6DeIXSOgHE0DO7STrDJPrw/281dd0130f40d8764dc9cdb6e3933509/containertree.png\" alt=\"Printing Tree structure\"></p>\n<h1 id=\"why-i-chose-net\" style=\"position:relative;\"><a href=\"#why-i-chose-net\" aria-label=\"why i chose net permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why I chose .NET</h1>\n<p>So initially I was torn between Node JS and C#, there was an especially compelling article by <a href=\"https://www.twilio.com/blog/how-to-build-a-cli-with-node-js\" target=\"_blank\" rel=\"nofollow\">Twilio</a> outlining how you can create a great CLI experience that was winning me over. They also went so far as suggesting some interesting packages to make use of, here's a snippet of whats comparable with what I used for az-lazy.</p>\n<ul>\n<li><a href=\"http://npm.im/inquirer\" target=\"_blank\" rel=\"nofollow\">inquirer</a>, <a href=\"http://npm.im/enquirer\" target=\"_blank\" rel=\"nofollow\">enquirer</a> or <a href=\"https://npm.im/prompts\" target=\"_blank\" rel=\"nofollow\">prompts</a> for complex input prompts</li>\n<li><a href=\"http://npm.im/chalk\" target=\"_blank\" rel=\"nofollow\">chalk</a> or <a href=\"https://npm.im/kleur\" target=\"_blank\" rel=\"nofollow\">kleur</a> for colored output</li>\n<li><a href=\"http://npm.im/ora\" target=\"_blank\" rel=\"nofollow\">ora</a> for beautiful spinners</li>\n<li><a href=\"http://npm.im/boxen\" target=\"_blank\" rel=\"nofollow\">boxen</a> for drawing boxes around your output</li>\n<li><a href=\"http://npm.im/stmux\" target=\"_blank\" rel=\"nofollow\">stmux</a> for a tmux like UI</li>\n<li><a href=\"http://npm.im/listr\" target=\"_blank\" rel=\"nofollow\">listr</a> for progress lists</li>\n<li><a href=\"http://npm.im/meow\" target=\"_blank\" rel=\"nofollow\">meow</a> or <a href=\"http://npm.im/arg\" target=\"_blank\" rel=\"nofollow\">arg</a> for basic argument parsing</li>\n<li><a href=\"http://npm.im/commander\" target=\"_blank\" rel=\"nofollow\">commander</a> and <a href=\"https://www.npmjs.com/package/yargs\" target=\"_blank\" rel=\"nofollow\">yargs</a> for complex argument parsing and subcommand support</li>\n<li><a href=\"https://oclif.io/\" target=\"_blank\" rel=\"nofollow\">oclif</a> a framework for building extensible CLIs by Heroku (<a href=\"https://infinitered.github.io/gluegun/#/\" target=\"_blank\" rel=\"nofollow\">gluegun</a> as an alternative)</li>\n</ul>\n<p>Whilst the NuGet ecosystem is not as diverse as npm, after discovering <em>Spectre.Console</em>, I found that its a one-stop-shop for most of those npm packages mentioned above.</p>\n<p>The deciding factor for me however was down to the userbase I was targeting. I figured the majority of my userbase would be more familiar with dotnet than npm, and this solidified the decision. However, whatever platform you choose I believe theres enough packages available to make a great CLI experience.</p>\n<h1 id=\"how-to-create-a-net-cli-tool\" style=\"position:relative;\"><a href=\"#how-to-create-a-net-cli-tool\" aria-label=\"how to create a net cli tool permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to create a .NET CLI tool</h1>\n<p>This guide shows you how to create a bare-bones .NET CLI tool.</p>\n<h3 id=\"1-creating-a-new-project\" style=\"position:relative;\"><a href=\"#1-creating-a-new-project\" aria-label=\"1 creating a new project permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Creating a new project</h3>\n<p>Let's start by creating a new directory and console application.</p>\n<ol>\n<li><code>mkdir barebonescli</code></li>\n<li><code>cd barebonescli</code></li>\n<li><code>dotnet new console</code></li>\n<li>The console app will already come with a standard-issue <code>Console.Writeline(\"Hello World\");</code> 😁</li>\n</ol>\n<h3 id=\"2-package-as-a-tool\" style=\"position:relative;\"><a href=\"#2-package-as-a-tool\" aria-label=\"2 package as a tool permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Package as a tool</h3>\n<p>What distinguishes your console app from a dotnet tool is purly the .csproj file. In particular the package as a tool option <code>&#x3C;PackAsTool>true&#x3C;/PackAsTool></code>, Id which needs to be unique across all the NuGet packages in the gallery <code>&#x3C;Id>azlazy&#x3C;/Id></code> and tool command name <code>&#x3C;ToolCommandName>azlazy&#x3C;/ToolCommandName></code>. The full .csproj should look like this,</p>\n\n        <deckgo-highlight-code   terminal=\"carbon\" line-numbers=\"true\" >\n          <code slot=\"code\">&lt;Project Sdk=&quot;Microsoft.NET.Sdk&quot;&gt;\n  &lt;PropertyGroup&gt;\n    &lt;OutputType&gt;Exe&lt;/OutputType&gt;\n    &lt;TargetFramework&gt;netcoreapp3.1&lt;/TargetFramework&gt;\n    &lt;RootNamespace&gt;barebonescli&lt;/RootNamespace&gt;\n    &lt;PackAsTool&gt;true&lt;/PackAsTool&gt;\n    &lt;ToolCommandName&gt;barebones&lt;/ToolCommandName&gt;\n    &lt;PackageOutputPath&gt;./nupkg&lt;/PackageOutputPath&gt;\n    &lt;Version&gt;1.0.0&lt;/Version&gt;\n    &lt;Id&gt;barebonescli&lt;/Id&gt;\n    &lt;Authors&gt;Faesel Saeed&lt;/Authors&gt;\n    &lt;Owners&gt;Faesel Saeed&lt;/Owners&gt;\n    &lt;Title&gt;Demo app to show a bare bones CLI&lt;/Title&gt;\n    &lt;Description&gt;This great CLI can greet the world&lt;/Description&gt;\n    &lt;Copyright&gt;Copyright 2020 Faesel Saeed&lt;/Copyright&gt;\n    &lt;PackageRequireLicenseAcceptance&gt;false&lt;/PackageRequireLicenseAcceptance&gt;\n    &lt;PackageLicenseFile&gt;LICENSE.txt&lt;/PackageLicenseFile&gt;\n    &lt;PackageIconUrl&gt;https://raw.githubusercontent.com/faesel/barebonescli/main/barebones/icon.png&lt;/PackageIconUrl&gt;\n    &lt;PackageTags&gt;barebones greeting cli&lt;/PackageTags&gt;\n    &lt;RepositoryUrl&gt;https://github.com/faesel/barebonescli.git&lt;/RepositoryUrl&gt;\n    &lt;RepositoryType&gt;git&lt;/RepositoryType&gt;\n    &lt;RepositoryBranch&gt;main&lt;/RepositoryBranch&gt;\n    &lt;PackageProjectUrl&gt;https://github.com/faesel/barebonescli&lt;/PackageProjectUrl&gt;\n    &lt;PackageIcon&gt;icon.png&lt;/PackageIcon&gt;\n  &lt;/PropertyGroup&gt;\n  &lt;ItemGroup&gt;\n    &lt;PackageReference Include=&quot;Microsoft.Extensions.DependencyInjection&quot; Version=&quot;3.1.9&quot; /&gt;\n    ...\n    &lt;None Include=&quot;LICENSE.txt&quot; Pack=&quot;true&quot; PackagePath=&quot;$(PackageLicenseFile)&quot; /&gt;\n    &lt;None Include=&quot;icon.png&quot; Pack=&quot;true&quot; PackagePath=&quot;\\&quot; /&gt;\n  &lt;/ItemGroup&gt;\n&lt;/Project&gt;</code>\n        </deckgo-highlight-code>\n      \n<p><em>The Github links are fictional, you can replace them with your project.</em></p>\n<p>To make your package more credible in the NuGet gallery there are other fields you can fill in. For the licence and package icon, you will need to place the files in the same project, the folder structure will look something like this, </p>\n<p>barebonescli</p>\n<ul>\n<li>barebonescli.csproj</li>\n<li>Program.cs</li>\n<li>icon.png</li>\n<li>LICENCE.txt</li>\n</ul>\n<h3 id=\"3-package-your-cli\" style=\"position:relative;\"><a href=\"#3-package-your-cli\" aria-label=\"3 package your cli permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Package your CLI</h3>\n<p>The next step is to create a NuGet package, if you specified a <code>PackageOutputPath</code> in your .csproj you will see the NuGet package in that folder. </p>\n<ol>\n<li>Run <code>dotnet pack</code> on the project</li>\n</ol>\n<p>Once executed you should have a <code>barebonescli.1.0.0.nupkg</code> file.</p>\n<h3 id=\"4-upload-your-package-to-the-nuget-gallery\" style=\"position:relative;\"><a href=\"#4-upload-your-package-to-the-nuget-gallery\" aria-label=\"4 upload your package to the nuget gallery permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Upload your package to the <a href=\"https://www.nuget.org/\" target=\"_blank\" rel=\"nofollow\">Nuget gallery</a></h3>\n<ol>\n<li>Click on your profile</li>\n<li>Select upload package and upload the nupkg file</li>\n</ol>\n<p><img src=\"//images.ctfassets.net/wjg1udsw901v/4nzpdnGHTMflgXhTNRw57Y/a37a98cfc3a5bcf56e6ba1cbb7bbb5ac/uploadingpackages.png\" alt=\"Nuget package upload\"></p>\n<p>You could also alternatively use the CLI to push with <code>nuget push barebonescli.1.0.0.nupkg</code></p>\n<p>Once uploaded it will be ready to install as soon as its indexed,  <code>dotnet tool install --global barebonescli --version 1.0.0</code> 😎</p>\n<p>From here the packages mentioned in this article can help you create a professional-looking CLI.</p>\n<h1 id=\"more-about-az-lazy\" style=\"position:relative;\"><a href=\"#more-about-az-lazy\" aria-label=\"more about az lazy permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>More about Az-Lazy</h1>\n<p>If you're interested in checking out Az-Lazy, you can install in with the command,</p>\n<p><code>dotnet tool install --global az-lazy</code></p>\n<h1 id=\"usefull-links\" style=\"position:relative;\"><a href=\"#usefull-links\" aria-label=\"usefull links permalink\" class=\"auto-link-header before\"><svg aria-hidden=\"true\" height=\"40\" width=\"40\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Usefull links</h1>\n<p>Do checkout <em>Nuget Must Haves</em> command-line tagged package list, there's some great options in there that are not mentioned in this article.</p>\n<p><a href=\"https://nugetmusthaves.com/Tag/Commandline?page=1\" target=\"_blank\" rel=\"nofollow\">Nuet Must Haves - CommandLine Packages</a></p>"}}}},"pageContext":{"slug":"my-journey-of-creating-a-dotnet-cli-tool"}}}